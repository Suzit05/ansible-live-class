---
- name: Launch Ec2 instance
  hosts: localhost
  connection: local
  gather_facts: no
  vars_files: 
    - vars.yml
  roles:
    - create_instance

- name: Wait for ec2 instance to appear in inventory
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Pause to allow ec2 registration
      pause: 
        seconds: 60
  
- name: Configure EC2 (Frontend + Backend)
  hosts: tag_environment_dev
  gather_facts: yes
  roles:
    - frontend
    - backend